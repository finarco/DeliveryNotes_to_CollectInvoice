{# Sidebar Component #}
<aside class="sidebar">
  <div class="sidebar-top">
    {# Logo Section #}
    <div class="sidebar-logo">
      <div class="logo-icon">D</div>
      <div class="logo-text">DeliveryNotes</div>
    </div>

    {# Navigation #}
    <nav>
      <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
          <a href="{{ url_for('dashboard.index') }}" class="sidebar-nav-link">
            <svg class="sidebar-nav-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            <span>Prehľad</span>
          </a>
        </li>

        {% if "manage_all" in user_permissions or "manage_partners" in user_permissions %}
        <li class="sidebar-nav-item">
          <a href="{{ url_for('partners.list_partners') }}" class="sidebar-nav-link">
            <svg class="sidebar-nav-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <span>Partneri</span>
          </a>
        </li>
        {% endif %}

        {% if "manage_all" in user_permissions or "manage_orders" in user_permissions %}
        <li class="sidebar-nav-item">
          <a href="{{ url_for('orders.list_orders') }}" class="sidebar-nav-link">
            <svg class="sidebar-nav-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            <span>Objednávky</span>
          </a>
        </li>
        {% endif %}

        {% if "manage_all" in user_permissions or "manage_delivery" in user_permissions %}
        <li class="sidebar-nav-item">
          <a href="{{ url_for('delivery.list_delivery_notes') }}" class="sidebar-nav-link">
            <svg class="sidebar-nav-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="1" y="3" width="15" height="13"></rect>
              <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
              <circle cx="5.5" cy="18.5" r="2.5"></circle>
              <circle cx="18.5" cy="18.5" r="2.5"></circle>
            </svg>
            <span>Dodacie listy</span>
          </a>
        </li>
        {% endif %}

        {% if "manage_all" in user_permissions or "manage_invoices" in user_permissions %}
        <li class="sidebar-nav-item">
          <a href="{{ url_for('invoices.list_invoices') }}" class="sidebar-nav-link">
            <svg class="sidebar-nav-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <line x1="10" y1="9" x2="8" y2="9"></line>
            </svg>
            <span>Faktúry</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>

  {# Bottom Section #}
  <div class="sidebar-bottom">
    {# Account Widget #}
    <div class="account-widget">
      <div class="account-avatar">
        {{ current_user.username[0].upper() if current_user else 'U' }}
      </div>
      <div class="account-info">
        <div class="account-name">{{ current_user.username if current_user else 'User' }}</div>
        <div class="account-role">Administrator</div>
      </div>
      <button type="button" class="logout-button" title="Odhlásiť">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
      </button>
    </div>
  </div>
</aside>

{# Hidden logout form #}
<form id="logout-form" action="{{ url_for('auth.logout') }}" method="post" style="display: none;">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
